# DiffusionDB: API & WebUI

This project is a Svelte web application that uses the DiffusionDB API to provide an interface for exploring [poloclub/diffusiondb](https://huggingface.co/datasets/poloclub/diffusiondb) dataset.

> DiffusionDB is the first large-scale text-to-image prompt dataset. It contains 2 million images generated by Stable Diffusion using prompts and hyperparameters specified by real users.

![DiffusionDB 2 Million Images](https://user-images.githubusercontent.com/15007159/198505835-bcc3a34f-a782-4064-989b-135e32b577a7.gif)

# Ideas

- show prompt, hyperparameters, and image in a modal?
- explain sqlite fts5 search options

# API 

The [DiffusionDB-API](https://github.com/anotherjesse/diffusiondb-api) is an opensource database API that provides a RESTful interface for querying the DiffusionDB dataset. The API is exposed at [https://diffusiondb-api.fly.dev](https://diffusiondb-api.fly.dev)

## Methods

### GET /?q={QUERY}&l={LIMIT}

Returns a list of images that match the query. The query is a string that is matched against the prompt text. The limit is the number of images returned.

The query uses SQLITE3 full-text search syntax. See [https://www.sqlite.org/fts5.html#full_text_query_syntax](https://www.sqlite.org/fts5.html#full_text_query_syntax) for more information.

### GET /stats

returns the total number of images in the dataset (and only works if the database is properly configured)

## Data Fields

- key: Unique image name
- p: Prompt
- se: Random seed
- c: CFG Scale (guidance scale)
- st: Steps
- sa: Sampler

# Images

The images are hosted on [CloudFlare R2](https://blog.cloudflare.com/r2/) in a public bucket.

Two versions of the images are stored - the original PNG and a resized JPG. The JPG is resized to 256x256 and are significantly smaller than the PNGs.

![hands](https://diffusiondb.m4ke.org/2527616a-f864-4c75-8fcc-1be3d6fb996e.jpg)

- JPEG: https://diffusiondb.m4ke.org/2527616a-f864-4c75-8fcc-1be3d6fb996e.jpg
- PNG: https://diffusiondb.m4ke.org/2527616a-f864-4c75-8fcc-1be3d6fb996e.png